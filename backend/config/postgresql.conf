# PostgreSQL Configuration for External Access
# Configuration for AgroConecta - External n8n Connection

# Connection Settings
listen_addresses = '*'          # Listen on all interfaces
port = 5432                     # PostgreSQL port
max_connections = 200           # Maximum number of connections

# Memory Settings
shared_buffers = 256MB          # Shared memory buffers
effective_cache_size = 1GB      # Effective cache size
work_mem = 4MB                  # Memory for query operations
maintenance_work_mem = 64MB     # Memory for maintenance operations

# Write Ahead Logging (WAL)
wal_buffers = 16MB              # WAL buffers
checkpoint_completion_target = 0.9  # Checkpoint completion target

# Query Tuning
default_statistics_target = 100  # Statistics target
random_page_cost = 1.1          # Random page cost

# Logging
log_destination = 'stderr'       # Log destination
logging_collector = on          # Enable logging collector
log_directory = 'log'           # Log directory
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'  # Log filename pattern
log_rotation_age = 1d           # Rotate logs daily
log_rotation_size = 10MB        # Rotate logs at 10MB
log_min_duration_statement = 1000  # Log slow queries (1 second)
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '  # Log line prefix

# Security
ssl = off                       # SSL disabled for internal network
password_encryption = md5       # Password encryption method

# Locale Settings
lc_messages = 'en_US.utf8'      # Locale for messages
lc_monetary = 'en_US.utf8'      # Locale for monetary
lc_numeric = 'en_US.utf8'       # Locale for numeric
lc_time = 'en_US.utf8'          # Locale for time

# Default Text Search Configuration
default_text_search_config = 'pg_catalog.english'  # Text search config
